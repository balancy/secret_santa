{% extends 'games/base.html' %}
{% load static %}
{% block header %}
    <title>Страница приветствия</title>
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
  <div class="card">
    <div class="card-header">
      Привет, {{ user }}! Замечательно, что ты собираешься участвовать в игре:
    </div>
    <div class="card-body">
      <form method="get">
        {{ form.as_p }}
      </form>
    </div>
  </div>
{% else %}
  <div class="card  border-dark">
    <div class="card-header">
      Регистрация
    </div>
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        {% for field in form %}
          {% if field.name not in 'wishlist,letter_to_santa' %}
            <div class="row">
                <div class="col my-2 col-4">
                  {% if field.field.required %}
                    <strong>{{ field.label_tag }}</strong>
                  {% else %}
                    {{ field.label_tag }}
                  {% endif %}
                </div>
                <div class="col my-2 col-8">
                  {{ field }}
                </div>
              <span class="red">{{ field.errors }}</span>
            </div>
          {% endif %}
        {% endfor %}
        <p>* поля, выделенные жирным, являются обязательными для заполнения</p>
        <hr>
        {% if is_invited %}
          <div>
            <p class="my-3"><strong>Карточка Санты</strong></p>
            <p>Желательные, но не обязательные поля для подбора более точного подарка</p>
            {% for field in form%}
              {% if field.name in 'wishlist,letter_to_santa' %}
                <div class="row">
                    <div class="col my-2 col-4">
                      {% if field.field.required %}
                        <strong>{{ field.label_tag }}</strong>
                      {% else %}
                        {{ field.label_tag }}
                      {% endif %}
                    </div>
                    <div class="col my-2 col-8">
                      {{ field }}
                    </div>
                  <span class="red">{{ field.errors }}</span>
                </div>
              {% endif %}
              {% endfor %}
          </div>
        {% endif %}
        <button class="btn btn-dark my-3 float-right" type="submit">
          Зарегистрироваться
        </button>
      </form>
    </div>
  </div>
{% endif %}
{% endblock %}