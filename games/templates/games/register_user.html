{% extends 'games/base.html' %}
{% load static %}
{% block header %}
    <title>Регистрация пользователя</title>
{% endblock %}

{% block content %}

<div class="card border-dark">
  {% if game%}
    <div class="card-header border-dark">
      Приглашение
    </div>

    <div class="card-body">
      Замечательно, ты собираешься участвовать в игре:
      <div class="row my-3">
        <div class="col-4">Название</div>
        <div class="col">{{ game.name }}</div>
      </div>
      <div class="row my-3">
        <div class="col-4">Макс. стоимость подарка</div>
        <div class="col">{% if game.max_price %}{{ game.max_price }}{% else %}-{% endif %}</div>
      </div>
      <div class="row my-3">
        <div class="col-4">Дата жеребьёвки</div>
        <div class="col">{{ game.draw_date }}</div>
      </div>
      <div class="row my-3">
        <div class="col-4">Дата вручения подарка</div>
        <div class="col">{{ game.gift_date }}</div>
      </div>
    </div>
  {% endif %}

  <form method="post">
    <div class="card-header border-dark" style="border-top: 1px solid;">
      Регистрация
    </div>

    <div class="card-body">
      {% csrf_token %}
      {% for field in form%}
        {% if field.name not in 'wishlist,letter_to_santa' %}
          <div class="row">
              <div class="col my-2 col-4">
                {% if field.field.required %}
                  <strong>{{ field.label_tag }}</strong>
                {% else %}
                  {{ field.label_tag }}
                {% endif %}
              </div>
              <div class="col my-2 col-8">
                {{ field }}
              </div>
            <span class="red">{{ field.errors }}</span>
          </div>
        {% endif %}
      {% endfor %}
      <p>* поля, выделенные жирным, являются обязательными для заполнения</p>
    </div>

    {% if game%}
      <div class="card-header border-dark" style="border-top: 1px solid;">
        Карточка Санты
      </div>

      <div class="card-body">
        <p>Желательные, но не обязательные поля для подбора более точного подарка</p>

        {% for field in form%}
          {% if field.name in 'wishlist,letter_to_santa' %}
            <div class="row">
                <div class="col my-2 col-4">
                  {% if field.field.required %}
                    <strong>{{ field.label_tag }}</strong>
                  {% else %}
                    {{ field.label_tag }}
                  {% endif %}
                </div>
                <div class="col my-2 col-8">
                  {{ field }}
                </div>
              <span class="red">{{ field.errors }}</span>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    <button class="btn btn-dark my-4 float-right mr-3" type="submit">
      Зарегистрироваться
    </button>

  </form>
</div>
{% endblock %}